<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link
    rel="stylesheet"
    href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css"
    />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.17.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link
    href="https://cdn.jsdelivr.net/npm/toastr@2.1.4/build/toastr.min.css"
    rel="stylesheet"
    />

</head>
<body>
    <div class="modal fade" id="addOrderModal" role="dialog">
        <div class="modal-dialog">
          <!-- Modal content-->
          <div class="modal-content" id="addOrderModal">
            <form id="addOrderForm">
              <div class="modal-header">
                <h4 class="modal-title">Reserve now !</h4>
                <button type="button" class="close" data-dismiss="modal">
                  &times;
                </button>
              </div>
              <div class="modal-body">
                <div class="form-group">
                  <label for="first_name">First Name:</label>
                  <input
                    type="text"
                    id="first_name"
                    name="first_name"
                    required
                    class="form-control"
                  />
                </div>
                <div>
                  <label for="last_name">Last Name:</label>
                  <input
                    type="text"
                    id="last_name"
                    name="last_name"
                    class="form-control"
                  />
                </div>
                <div>
                    <label for="email">Email:</label>
                    <input
                      type="text"
                      id="email"
                      name="email"
                      class="form-control"
                    />
                  </div>
              </div>
              <div class="error"><span></span></div>
              <div class="modal-footer">
                <button
                  type="button"
                  class="btn btn-default"
                  id="close_button"
                  data-dismiss="modal"
                >
                  Close
                </button>
                <button type="submit" class="btn btn-success">Submit</button>
              </div>
              <div id="messageBox1"><ul></ul></div>
            </form>
          </div>
        </div>
      </div>
</body>
<script>

// Get the modal element
const modal = document.getElementById('addOrderModal');

// Function to open the modal
function openModal() {
  modal.style.display = 'block';
}

// Event listener to open the modal when the page loads
window.addEventListener('load', openModal);


$("#addOrderForm").validate({
    focusCleanup: true,
    errorElement: "em",
    rules: {
      first_name: "required",
      last_name: "required",
      email: "required"
    },
    messages: {
      productName: "First name field is required",
      productDescription: "Last name field is required",
      productPrice: "Email is required",
    },
    highlight: function (element, errorClass) {
      $(element).fadeOut(function () {
        $(element).fadeIn();
      });
    },
    errorContainer: "#messageBox1",
    errorLabelContainer: "#messageBox1 ul",
    wrapper: "li",
    submitHandler: function (form, validator) {
      $.post("../rest/order", $("#addOrderForm").serialize())
        .done(function () {
          toastr.success("Order added");
          $("#addOrderModal").modal("toggle");
          form.reset();
        })
        .fail(function () {
          toastr.error("Order not added");
        });
    },
    invalidHandler: function (event, validator) {
      var errors = validator.numberOfInvalids();
      toastr.error("Error");
      if (errors) {
        var message =
          errors == 1
            ? "You missed 1 field."
            : "You missed " + errors + " fields.";
        $("div.error span").html(message);
        $("div.error").show();
      } else {
        $("div.error").hide();
      }
    },
}); 
</script>
</html>